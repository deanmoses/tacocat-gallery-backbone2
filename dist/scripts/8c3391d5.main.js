"use strict";var Authentication={};Authentication.Model=Backbone.Model.extend({initialize:function(){_.bindAll(this,"isAuthenticated","isSiteAdmin")},url:function(){return app.mock?"mock/authentication.json.txt":app.baseAjaxUrl+"json.Auth"},isAuthenticated:function(){return this.get("isAuthenticated")===!0},isSiteAdmin:function(){return this.get("isSiteAdmin")===!0}}),Authentication.View=Backbone.View.extend({initialize:function(){_.bindAll(this,"render"),this.listenTo(this.model,"change",this.render)},render:function(){this.model.isAuthenticated()?$("body").addClass("authenticated"):$("body").removeClass("authenticated"),this.model.isSiteAdmin()?$("body").addClass("is-site-admin"):$("body").removeClass("is-site-admin"),jQuery.getCachedScript=function(a,b){return b=$.extend(b||{},{dataType:"script",cache:!0,url:a}),jQuery.ajax(b)},$.getCachedScript("scripts/vendor/wysihtml5-0.3.0.min.js").done(function(){}).fail(function(a,b,c){console.log("Error loading rich text editor: "+c)}),$.getCachedScript("scripts/vendor/wysihtml5-parser-rules-advanced.js").done(function(){}).fail(function(a,b,c){console.log("Error loading rich text editor parser rules: "+c)})}});var Firsts={};Firsts.Model=Backbone.Model.extend({initialize:function(){_.bindAll(this,"getFirstsForYear")},url:function(){return app.mock?"mock/firsts.json.txt":"http://tacocat.com/p/php/firsts.php"},getFirstsForYear:function(a){return this.get(a)}});var Album={Views:{}};Album.Model=Backbone.Model.extend({idAttribute:"fullPath",url:function(){return app.mock?this.id.indexOf("/")>=0?"mock/album.json.txt":"mock/album-year.json.txt":"http://tacocat.com/pictures/main.php?g2_view=json.Album&album="+this.id},initialize:function(){_.bindAll(this,"getPhotoByPathComponent","getNextPhoto","getPrevPhoto","getCreationDate","getTitle")},getPhotoByPathComponent:function(a){var b=_.find(this.attributes.children,function(b){return b.pathComponent===a});return b},getNextPhoto:function(a){var b=!1;return _.find(this.attributes.children,function(c){return b?!0:(c.pathComponent===a&&(b=!0),void 0)})},getPrevPhoto:function(a){var b;return _.find(this.attributes.children,function(c){return c.pathComponent===a?!0:(b=c,void 0)}),b},getCreationDate:function(){return new Date(1e3*this.attributes.creationTimestamp)},getTitle:function(){return"week"===this.attributes.albumType?this.attributes.title+", "+this.getCreationDate().getFullYear():"year"===this.attributes.albumType?this.attributes.title+" - Dean, Lucie, Felix & Milo Moses":null}}),Album.Collection=Backbone.Collection.extend({model:Album.Model,initialize:function(){_.bindAll(this,"fetchAlbum")},fetchAlbum:function(a){var b=this,c=$.Deferred(),d=this.get(a);return d?c.resolve(d):(d=new Album.Model({fullPath:a}),d.fetch({success:function(){if(a.indexOf("/")>=0){var e=a.split("/");e.pop(),d.attributes.parentAlbumPath=e.join("/"),d.attributes.albumType="week"}else a.length>0?(d.attributes.parentAlbumPath="",d.attributes.albumType="year",d.attributes.firsts=app.Models.firstsModel.getFirstsForYear(d.attributes.title)):(d.attributes.parentAlbumPath=null,d.attributes.albumType="root",d.attributes.title=void 0);d.attributes.fulltitle=d.getTitle(),b.push(d),c.resolve(d)},error:function(b,d,e){console.log("Error fetching album "+a+": ",d,e),c.reject(d,e)}})),c.promise()}}),Album.Store=new Album.Collection,Album.Views.Main=Backbone.View.extend({initialize:function(){_.bindAll(this,"render")},render:function(){var a=this.model.attributes.albumType,b=Album.Views[a];if(!b)throw"Unknown album type: ["+a+"]";this.$el.empty();var c=app.renderTemplate("album_"+a+"_header",this.model.attributes),d=Album.Views[a].getSecondaryHeader?Album.Views[a].getSecondaryHeader():void 0,e=Album.Views[a].getBodyHtml(this.model),f=app.renderTemplate("layout_main",{pageType:"album "+a+("year"===a?" y"+this.model.attributes.title:""),header:c,secondaryHeader:d,body:e});return this.$el.html(f),app.setTitle(this.model.getTitle()),this}}),Album.Views.week={},Album.Views.week.getBodyHtml=function(a){var b="";return _.each(a.get("children"),function(a){b+=app.renderTemplate("thumbnail",a)}),app.renderTemplate("album_body",{album:a.attributes,thumbnails:b})},Album.Views.year={},Album.Views.year.getBodyHtml=function(a){for(var b=_.groupBy(a.get("children"),function(a){var b=new Date(1e3*a.creationTimestamp),c=b.getMonth();return c}),c=["January","February","March","April","May","June","July","August","September","October","November","December"],d="",e=11;e>=0;e--)if(b[e]){var f={name:c[e],albums:b[e]};d+=app.renderTemplate("thumbnail_month",f)}return app.renderTemplate("album_body",{album:a.attributes,thumbnails:d})},Album.Views.year.getSecondaryHeader=function(){return app.renderTemplate("album_year_header_secondary")},Album.Views.root={},Album.Views.root.getBodyHtml=function(a){var b="";_.each(a.get("children"),function(a){b+=app.renderTemplate("thumbnail",a)});var c=[{url:"/pix/2006/index.php",title:"2006",thumbnail:{url:"2006-reading.jpg",height:75,width:150}},{url:"/pix/2005/index.php",title:"2005",thumbnail:{url:"2005-bath.jpg",height:75,width:150}},{url:"/pix/2004/index.php",title:"2004",thumbnail:{url:"2004_fall_milo.jpg",height:75,width:75}},{url:"/pix/2003/index.php",title:"2003",thumbnail:{url:"21months_small.jpg",height:75,width:75}},{url:"/pix/2002/index.php",title:"2002",thumbnail:{url:"1year_small.jpg",height:75,width:75}},{url:"/pix/2001/index.php",title:"2001",thumbnail:{url:"felix_small.jpg",height:75,width:75}},{url:"/pix/1973/dean/index.php",title:"1973",thumbnail:{url:"1973-dean-2weeks-thumb.jpg",height:75,width:75}}];return _.each(c,function(a){b+=app.renderTemplate("thumbnail_earlyyears",a)}),app.renderTemplate("album_body",{album:a,thumbnails:b})};var Photo={Views:{}};Photo.Views.PhotoPage=Backbone.View.extend({initialize:function(){_.bindAll(this,"render","renderCaptionEdit","handleCaptionSubmit","handleCaptionCancel")},render:function(){this.model.description=app.rewriteGalleryUrls(this.model.description),this.$el.empty();var a=app.renderTemplate("photo_header",this.model),b=app.renderTemplate("photo_body",this.model),c=this.model.description&&(this.model.description.length>100||this.model.description.indexOf("<p")>=0),d=this.model.height>this.model.width,e=d||c?"sidebar-text":"top-text",f=app.renderTemplate("layout_main",{pageType:"photo "+e,header:a,body:b});this.$el.html(f),app.setTitle(this.model.title+" - "+this.model.album.fulltitle),this.resizeImage(".photo #body .photo-container img",".photo #body .photo-container");var g=this.$el.find(".admin-controls .caption-button");return g&&g.click(this.renderCaptionEdit),this},renderCaptionEdit:function(){var a=this.$el.find("#header");a.html(app.renderTemplate("photo_caption_edit",this.model)),a.find(".button.submit").click(this.handleCaptionSubmit),a.find(".button.cancel").click(this.handleCaptionCancel);var b=new wysihtml5.Editor("caption",{toolbar:"wysihtml5-editor-toolbar",stylesheets:["http://yui.yahooapis.com/2.9.0/build/reset/reset-min.css","styles/editor/editor.css"],parserRules:wysihtml5ParserRules});return b.observe("load",function(){b.composer.element.addEventListener("mouseover",function(){b.composer.iframe.style.height=b.composer.element.scrollHeight+"px"}),b.composer.element.addEventListener("keyup",function(){b.composer.iframe.style.height=b.composer.element.scrollHeight+"px"})}),$("#body .caption").addClass("hidden"),this},handleCaptionSubmit:function(){var a=this,b=this.$el.find(".caption-edit-controls input[name='title']").val(),c=this.$el.find(".caption-edit-controls textarea#caption").val();this.model.title!==b||this.model.description!==c?$.post("http://tacocat.com/pictures/main.php?g2_view=json.SaveCaption",{id:this.model.id,title:b,description:c}).done(function(){a.model.title=b,a.model.description=c,a.render()}).fail(function(a){alert("error: "+a),console.log("Error saving caption",a)}):console.log("caption / title haven't changed"),$("#body .caption").removeClass("hidden")},handleCaptionCancel:function(){this.render(),$("#body .caption").removeClass("hidden")},resizeImageOnce:function(a,b){var c=a.width(),d=a.height();if(!(0>=c||0>=d)){var e=b.width(),f=b.height();if(!(0>=e||0>=f)){var g=Math.round(e*(d/c));f>=g?(a.width(e),a.height(g)):(a.height(f),a.width(Math.round(f*(c/d)))),a.css("display","block")}}},resizeImage:function(a,b){var c=$(a),d=$(b),e=this;c.load(function(){e.resizeImageOnce(c,d)}),$(window).resize(function(){e.resizeImageOnce(c,d)})}});var Router=Backbone.Router.extend({routes:{"v/*path.html":"viewPhoto","v/*path":"viewAlbum","*path":"notFound"},initialize:function(){_.bindAll(this)},wait:function(){$("#waiting").addClass("on")},unwait:function(){$("#waiting").removeClass("on")},viewPhoto:function(a){var b=this;this.wait();var c=a.split("/"),d=c.pop(),e=c.join("/");Album.Store.fetchAlbum(e).fail(function(b,c){console("Router.viewPhoto() couldn't find album "+a+". Error: ",b,c)}).done(function(a){var b=a.getPhotoByPathComponent(d);if(!b)throw"No photo with ID "+d;b.album=a.attributes,b.nextPhoto=a.getNextPhoto(d),b.prevPhoto=a.getPrevPhoto(d),b.orientation=b.height>b.width?"portrait":"landscape",new Photo.Views.PhotoPage({model:b,el:$("#main")}).render()}).always(function(){b.unwait()})},viewAlbum:function(a){var b=this;this.wait(),a=this.normalizePath(a),Album.Store.fetchAlbum(a).fail(function(b,c){console.log("Couldn't find album "+a+". Error: ",b,c)}).done(function(a){new Album.Views.Main({model:a,el:$("#main")}).render()}).always(function(){b.unwait()})},notFound:function(){this.viewAlbum("")},normalizePath:function(a){if(!a)return"";a=a.replace(/\/$/,"");var b=a.split("/");return b.join("/")}});window.app={Models:{},Collections:{},Views:{},Routers:{},mock:!1,baseAjaxUrl:"http://tacocat.com/pictures/main.php?g2_view=",setTitle:function(a){document.title=a?a+" - Dean, Lucie, Felix and Milo Moses":"Dean, Lucie, Felix and Milo Moses"},renderTemplate:function(a,b){var c=this.getTemplate(a);if(!c)throw"Error retrieving template ["+a+"]";return c(b)},getTemplate:function(a){var b="app/templates/"+a+".handlebars";return JST&&JST[b]?JST[b]:(void 0===Handlebars.templates&&(Handlebars.templates={}),void 0==Handlebars.templates[a]&&$.ajax({url:"templates/"+a+".handlebars",async:!1}).done(function(b){Handlebars.templates[a]=Handlebars.compile(b)}).fail(function(b,c,d){throw"Failed to retrieve template ["+a+"]: "+d}),Handlebars.templates[a])},rewriteGalleryUrls:function(a){var b=$($.parseHTML("<span>"+a+"</span>"));return b.find("a").attr("href",function(){return this.href&&0===this.href.lastIndexOf(window.location.origin,0)?this.href.replace(/pictures\//,"p/#"):void 0}),b.html()},init:function(){app.Models.authenticationModel.fetch({error:function(a,b){console.log("gallery.authentication.fetch() - error.  xhr: ",b)}}),Backbone.history.start({pushState:!1})}},app.Models.authenticationModel=new Authentication.Model,app.Models.authenticationView=new Authentication.View({model:app.Models.authenticationModel}),app.Models.firstsModel=new Firsts.Model,app.Models.firstsModel.fetch(),app.Routers.main=new Router,$(document).ready(function(){app.init()}),this.JST=this.JST||{},this.JST["app/templates/album_body.handlebars"]=Handlebars.template(function(a,b,c,d,e){function f(a){var b,c,d="";return d+='\n<section class="caption">\n	<h1 class="hidden">Overview</h1>\n	',b=a.album,b=null==b||b===!1?b:b.description,c=typeof b===m?b.apply(a):b,(c||0===c)&&(d+=c),d+="\n</section>\n"}function g(a,b){var d,e,f="";return f+='\n	<div class="firsts-container">\n		<section class="firsts">\n			<h1 class="hidden">Firsts</h1>\n			',e=c.each.call(a,(d=a.album,null==d||d===!1?d:d.firsts),{hash:{},inverse:o.noop,fn:o.program(4,h,b),data:b}),(e||0===e)&&(f+=e),f+="\n		</section>\n	</div>\n	"}function h(a,b){var d,e="";return e+="\n				<p><span>",(d=c.what)?d=d.call(a,{hash:{},data:b}):(d=a.what,d=typeof d===m?d.apply(a):d),e+=n(d)+"</span>",(d=c.when)?d=d.call(a,{hash:{},data:b}):(d=a.when,d=typeof d===m?d.apply(a):d),e+=n(d),d=c["if"].call(a,a.who,{hash:{},inverse:o.noop,fn:o.program(5,i,b),data:b}),(d||0===d)&&(e+=d),e+="</p>\n			"}function i(a,b){var d,e="";return e+=" (",(d=c.who)?d=d.call(a,{hash:{},data:b}):(d=a.who,d=typeof d===m?d.apply(a):d),e+=n(d)+")"}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var j,k,l="",m="function",n=this.escapeExpression,o=this;return k=c["if"].call(b,(j=b.album,null==j||j===!1?j:j.description),{hash:{},inverse:o.noop,fn:o.program(1,f,e),data:e}),(k||0===k)&&(l+=k),l+='\n<div class="container-table">\n	',k=c["if"].call(b,(j=b.album,null==j||j===!1?j:j.firsts),{hash:{},inverse:o.noop,fn:o.program(3,g,e),data:e}),(k||0===k)&&(l+=k),l+='\n	<section class="thumbnails">\n		<h1 class="hidden">Pictures</h1>\n		',(k=c.thumbnails)?k=k.call(b,{hash:{},data:e}):(k=b.thumbnails,k=typeof k===m?k.apply(b):k),(k||0===k)&&(l+=k),l+="\n	</section>\n</div>"}),this.JST["app/templates/album_root_header.handlebars"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f="";return f+="\n<h1>Dean, Lucie, Felix and Milo Moses</h1>"}),this.JST["app/templates/album_week_header.handlebars"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function",i=this.escapeExpression;return g+='\n<h1><a href="#v/',(f=c.parentAlbumPath)?f=f.call(b,{hash:{},data:e}):(f=b.parentAlbumPath,f=typeof f===h?f.apply(b):f),g+=i(f)+'">',(f=c.fulltitle)?f=f.call(b,{hash:{},data:e}):(f=b.fulltitle,f=typeof f===h?f.apply(b):f),g+=i(f)+'</a></h1>\n<div class="button-group float-right">\n	<a href="#v/',(f=c.parentAlbumPath)?f=f.call(b,{hash:{},data:e}):(f=b.parentAlbumPath,f=typeof f===h?f.apply(b):f),g+=i(f)+'" class="button">&#x2039; ',(f=c.parentAlbumPath)?f=f.call(b,{hash:{},data:e}):(f=b.parentAlbumPath,f=typeof f===h?f.apply(b):f),g+=i(f)+"</a>\n</div>"}),this.JST["app/templates/album_year_header.handlebars"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function",i=this.escapeExpression;return g+='\n<h1><a href="#v/">',(f=c.fulltitle)?f=f.call(b,{hash:{},data:e}):(f=b.fulltitle,f=typeof f===h?f.apply(b):f),g+=i(f)+'</a></h1>\n<div class="button-group float-right">\n    <a href="#v/" class="button">&#x2039; Home</a>\n</div>\n'}),this.JST["app/templates/album_year_header_secondary.handlebars"]=Handlebars.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},'<nav class="years">\n	<h1 class="hidden">Years</h1>\n   	<a href="#v/2013">2013</a>\n    <a href="#v/2012">2012</a>\n    <a href="#v/2011">2011</a>\n    <a href="#v/2010">2010</a>\n    <a href="#v/2009">2009</a>\n    <a href="#v/2008">2008</a>\n    <a href="#v/2007">2007</a>\n    <a href="/pix/2006/index.php">2006</a>\n    <a href="/pix/2005/index.php">2005</a>\n    <a href="/pix/2004/index.php">2004</a>\n    <a href="/pix/2003/index.php">2003</a>\n    <a href="/pix/2002/index.php">2002</a>\n    <a href="/pix/2001/index.php">2001</a>\n    <a href="/pix/1973/dean/index.php">1973</a>\n</nav>'}),this.JST["app/templates/layout_main.handlebars"]=Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+='\n	<div class="container-table-row secondary-header">\n		<div class="container-table-cell" id="secondary-header">\n			',(d=c.secondaryHeader)?d=d.call(a,{hash:{},data:b}):(d=a.secondaryHeader,d=typeof d===i?d.apply(a):d),(d||0===d)&&(e+=d),e+="\n		</div>\n	</div>\n	"}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var g,h="",i="function",j=this.escapeExpression,k=this;return h+='\n<div class="container-table ',(g=c.pageType)?g=g.call(b,{hash:{},data:e}):(g=b.pageType,g=typeof g===i?g.apply(b):g),h+=j(g)+'">\n	<div class="container-table-row header">\n		<div class="container-table-cell" id="header">\n			',(g=c.header)?g=g.call(b,{hash:{},data:e}):(g=b.header,g=typeof g===i?g.apply(b):g),(g||0===g)&&(h+=g),h+="\n		</div>\n	</div>\n	",g=c["if"].call(b,b.secondaryHeader,{hash:{},inverse:k.noop,fn:k.program(1,f,e),data:e}),(g||0===g)&&(h+=g),h+='\n	<div class="container-table-row body">\n		<div class="container-table-cell">\n			<div id="body">\n				',(g=c.body)?g=g.call(b,{hash:{},data:e}):(g=b.body,g=typeof g===i?g.apply(b):g),(g||0===g)&&(h+=g),h+="\n			</div>\n		</div>\n	</div>\n</div>"}),this.JST["app/templates/photo_body.handlebars"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function",i=this.escapeExpression;return g+='\n<section class="caption">\n	<h1 class="hidden">Caption</h1>\n    ',(f=c.description)?f=f.call(b,{hash:{},data:e}):(f=b.description,f=typeof f===h?f.apply(b):f),(f||0===f)&&(g+=f),g+='\n</section>\n<section class="photo-container">\n	<h1 class="hidden">Photo</h1>\n	<img src="http://tacocat.com/pictures/d/',(f=c.id)?f=f.call(b,{hash:{},data:e}):(f=b.id,f=typeof f===h?f.apply(b):f),g+=i(f)+"-3/",(f=c.pathComponent)?f=f.call(b,{hash:{},data:e}):(f=b.pathComponent,f=typeof f===h?f.apply(b):f),g+=i(f)+'" style="max-width: ',(f=c.width)?f=f.call(b,{hash:{},data:e}):(f=b.width,f=typeof f===h?f.apply(b):f),g+=i(f)+"px; max-height: ",(f=c.height)?f=f.call(b,{hash:{},data:e}):(f=b.height,f=typeof f===h?f.apply(b):f),g+=i(f)+'px" />\n</section>'}),this.JST["app/templates/photo_caption_edit.handlebars"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function";return g+='<div class="caption-edit-controls">\n	<input type="text" name="title" value="',(f=c.title)?f=f.call(b,{hash:{},data:e}):(f=b.title,f=typeof f===h?f.apply(b):f),(f||0===f)&&(g+=f),g+='" />\n	\n	<div id="wysihtml5-editor-toolbar">\n		<header>\n			<ul class="commands">\n				<li data-wysihtml5-command="bold" title="Make text bold (CTRL + B)" class="command"></li>\n				<li data-wysihtml5-command="italic" title="Make text italic (CTRL + I)" class="command"></li>\n				<!--<li data-wysihtml5-command="underline" title="Make text underline (CTRL + U)" class="command"></li>-->\n				<li data-wysihtml5-command="insertUnorderedList" title="Insert an unordered list" class="command"></li>\n				<li data-wysihtml5-command="createLink" title="Insert a link" class="command"></li>\n				<li data-wysihtml5-action="change_view" title="Show HTML" class="action"></li>\n			</ul>\n		</header>\n		<div data-wysihtml5-dialog="createLink" style="display: none;">\n			<label>\n				Link:\n				<input data-wysihtml5-dialog-field="href" value="http://">\n			</label>\n			<a data-wysihtml5-dialog-action="save">OK</a>&nbsp;<a data-wysihtml5-dialog-action="cancel">Cancel</a>\n		</div>\n		\n		<div data-wysihtml5-dialog="insertImage" style="display: none;">\n			<label>\n				Image:\n				<input data-wysihtml5-dialog-field="src" value="http://">\n			</label>\n			<a data-wysihtml5-dialog-action="save">OK</a>&nbsp;<a data-wysihtml5-dialog-action="cancel">Cancel</a>\n		</div>\n	</div>\n	\n	<section>\n		<textarea id="caption" spellcheck="true" wrap="on" autofocus placeholder="Enter caption ...">\n			',(f=c.description)?f=f.call(b,{hash:{},data:e}):(f=b.description,f=typeof f===h?f.apply(b):f),(f||0===f)&&(g+=f),g+='\n		</textarea>\n	</section>\n	\n	<div class="button-group">\n	 	<a class="button cancel">Cancel</a>\n        <a class="button submit success active">Save</a>\n    </div>\n</div>'}),this.JST["app/templates/photo_header.handlebars"]=Handlebars.template(function(a,b,c,d,e){function f(a){var b,c="";return c+='href="#'+l((b=a.prevPhoto,b=null==b||b===!1?b:b.url,typeof b===k?b.apply(a):b))+'"'}function g(a){var b,c="";return c+='href="#'+l((b=a.nextPhoto,b=null==b||b===!1?b:b.url,typeof b===k?b.apply(a):b))+'"'}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var h,i,j="",k="function",l=this.escapeExpression,m=this;return j+='\n<h1><a href="#v/">',(h=c.title)?h=h.call(b,{hash:{},data:e}):(h=b.title,h=typeof h===k?h.apply(b):h),(h||0===h)&&(j+=h),j+='</a></h1>\n<nav class="button-group float-right">\n	<h1 class="hidden">Photo Navigation</h1>\n 	<a class="button" ',h=c["if"].call(b,b.prevPhoto,{hash:{},inverse:m.noop,fn:m.program(1,f,e),data:e}),(h||0===h)&&(j+=h),j+='>&#x2039; Prev</a>\n    <a class="button" href="#'+l((h=b.album,h=null==h||h===!1?h:h.url,typeof h===k?h.apply(b):h))+'">Album</a>\n    <a class="button" ',i=c["if"].call(b,b.nextPhoto,{hash:{},inverse:m.noop,fn:m.program(3,g,e),data:e}),(i||0===i)&&(j+=i),j+='>Next &#x203A;</a>\n</nav>\n<div class="admin-controls">\n	<a class="caption-button">caption</a>\n	<a target="edit" href="http://tacocat.com/pictures/main.php?g2_view=core.ItemAdmin&g2_subView=core.ItemEdit&g2_itemId=',(i=c.id)?i=i.call(b,{hash:{},data:e}):(i=b.id,i=typeof i===k?i.apply(b):i),j+=l(i)+'">edit</a>\n</div>'}),this.JST["app/templates/thumbnail.handlebars"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i="function",j=this.escapeExpression;return h+='<article class="thumbnail">\n	<a href="#',(f=c.url)?f=f.call(b,{hash:{},data:e}):(f=b.url,f=typeof f===i?f.apply(b):f),h+=j(f)+'"><img src="'+j((f=b.thumbnail,f=null==f||f===!1?f:f.url,typeof f===i?f.apply(b):f))+'" width="'+j((f=b.thumbnail,f=null==f||f===!1?f:f.width,typeof f===i?f.apply(b):f))+'px" height="'+j((f=b.thumbnail,f=null==f||f===!1?f:f.height,typeof f===i?f.apply(b):f))+'px" alt="'+j((f=b.thumbnail,f=null==f||f===!1?f:f.title,typeof f===i?f.apply(b):f))+'"/></a>\n	<a href="#',(g=c.url)?g=g.call(b,{hash:{},data:e}):(g=b.url,g=typeof g===i?g.apply(b):g),h+=j(g)+'" style="width:'+j((f=b.thumbnail,f=null==f||f===!1?f:f.width,typeof f===i?f.apply(b):f))+'px" class="title"><h1>',(g=c.title)?g=g.call(b,{hash:{},data:e}):(g=b.title,g=typeof g===i?g.apply(b):g),h+=j(g)+"</h1></a>\n</article>"}),this.JST["app/templates/thumbnail_earlyyears.handlebars"]=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i="function",j=this.escapeExpression;return h+='\n<article class="thumbnail">\n	<a href="',(f=c.url)?f=f.call(b,{hash:{},data:e}):(f=b.url,f=typeof f===i?f.apply(b):f),h+=j(f)+'"><img src="http://tacocat.com/pix/img/'+j((f=b.thumbnail,f=null==f||f===!1?f:f.url,typeof f===i?f.apply(b):f))+'" width="'+j((f=b.thumbnail,f=null==f||f===!1?f:f.width,typeof f===i?f.apply(b):f))+'px" height="'+j((f=b.thumbnail,f=null==f||f===!1?f:f.height,typeof f===i?f.apply(b):f))+'px" alt="',(g=c.title)?g=g.call(b,{hash:{},data:e}):(g=b.title,g=typeof g===i?g.apply(b):g),h+=j(g)+'"/></a>\n	<a href="',(g=c.url)?g=g.call(b,{hash:{},data:e}):(g=b.url,g=typeof g===i?g.apply(b):g),h+=j(g)+'" style="width:'+j((f=b.thumbnail,f=null==f||f===!1?f:f.width,typeof f===i?f.apply(b):f))+'px" class="title"><h1>',(g=c.title)?g=g.call(b,{hash:{},data:e}):(g=b.title,g=typeof g===i?g.apply(b):g),h+=j(g)+"</h1></a>\n</article>"}),this.JST["app/templates/thumbnail_month.handlebars"]=Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e,f="";return f+='\n		<article class="thumbnail">\n			<a href="#',(d=c.url)?d=d.call(a,{hash:{},data:b}):(d=a.url,d=typeof d===j?d.apply(a):d),f+=k(d)+'"><img src="'+k((d=a.thumbnail,d=null==d||d===!1?d:d.url,typeof d===j?d.apply(a):d))+'" width="'+k((d=a.thumbnail,d=null==d||d===!1?d:d.width,typeof d===j?d.apply(a):d))+'px" height="'+k((d=a.thumbnail,d=null==d||d===!1?d:d.height,typeof d===j?d.apply(a):d))+'px" alt="'+k((d=a.thumbnail,d=null==d||d===!1?d:d.title,typeof d===j?d.apply(a):d))+'"/></a>\n			<a href="#',(e=c.url)?e=e.call(a,{hash:{},data:b}):(e=a.url,e=typeof e===j?e.apply(a):e),f+=k(e)+'" style="width:'+k((d=a.thumbnail,d=null==d||d===!1?d:d.width,typeof d===j?d.apply(a):d))+'px" class="title"><h1>',(e=c.title)?e=e.call(a,{hash:{},data:b}):(e=a.title,e=typeof e===j?e.apply(a):e),f+=k(e)+"</h1></a>\n			",e=c["if"].call(a,a.summary,{hash:{},inverse:l.noop,fn:l.program(2,g,b),data:b}),(e||0===e)&&(f+=e),f+="\n		</article>\n	"}function g(a,b){var d,e,f="";return f+='<div style="width:'+k((d=a.thumbnail,d=null==d||d===!1?d:d.width,typeof d===j?d.apply(a):d))+'px" class="summary">',(e=c.summary)?e=e.call(a,{hash:{},data:b}):(e=a.summary,e=typeof e===j?e.apply(a):e),(e||0===e)&&(f+=e),f+="</div>"}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var h,i="",j="function",k=this.escapeExpression,l=this;return i+='<section class="month">\n	<h1>',(h=c.name)?h=h.call(b,{hash:{},data:e}):(h=b.name,h=typeof h===j?h.apply(b):h),i+=k(h)+"</h1>\n	",h=c.each.call(b,b.albums,{hash:{},inverse:l.noop,fn:l.program(1,f,e),data:e}),(h||0===h)&&(i+=h),i+="\n</section>"});